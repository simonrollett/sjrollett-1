# MadJester website

Online clothing store

## Installation

> Make sure you're running node > v8

1. npm install
2. npm run build
3. npm run serve (separate terminal window)
4. Navigate to dashboard root:
```http://localhost:6000```
    in a browser.

## Editing template source code
1. Emails are generated by assets in:

    ```
    src/assets/js/
    ```
2. Each email has its own 'content definition' **.js** file in an **email role** dir, such as:

    ```
    email_content_definitions
    - quote_and_purchase
      - purchase-confirmation.js
    ```

    which defines content with a combination of strings, functions and brand data.

    > NB: The **.js** filename **MUST** correspond with the **Mandrill** slug.

3. This content is then combined with its specified **html_template**:
    ```
    // an_example_template.js
    ...
    const email_content = {
        config:{
            ...
            html_template:'template_email_v1'
        }
        ....

    ```

4. And output as a complete **html** file into:

    ```
    /public/emails/

    ```

## Adding a template
- Add a new content definition **.js** file to an existing folder, or add a new **email role** folder, such as:
    ```
    email_content_definitions
    - new_email_role_type
      ...
      - new-filename-that-matches-mandrill-slug.js
    ```
    and define its content based on an existing example.

### Server
Localhost port is set by the **serve** script in:
```package.json ```

### Based on:
https://www.webdevdrops.com/build-static-site-generator-nodejs-8969ebe34b22/

### TODO
- Multiple json data options for each template
- Better separation of dashboard serverside and clientside assets

### Help
- https://www.npmjs.com/package/directory-tree
- https://www.npmjs.com/package/write
- https://sass-lang.com/documentation/cli/dart-sass
- https://mandrillapp.com/api/docs/
- github.com/qmetric/qmetric/messaging/src/main/java/com/qmetric/messaging/amqp/consumer/mandrill/client/infrastructure/SilverPopToMandrillClientAdapter.java
